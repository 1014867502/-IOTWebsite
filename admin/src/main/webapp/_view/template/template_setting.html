<!DOCTYPE html>
<html>
<head>
    #@meta("模板设置里的首页")
    <script src="/assets/lib/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="/assets/lib/leaflet/leaflet.css">
    <link rel="stylesheet" href="/assets/lib/leaflet/group/leaflet.groupedlayercontrol.css"/>
    <script src="/assets/lib/leaflet/leaflet.js"></script>
    <script src="/assets/lib/leaflet/group/leaflet.groupedlayercontrol.js"></script>
    <script src="/assets/lib/leaflet/leaflet.ChineseTmsProviders.js"></script>
    <script src="/assets/lib/leaflet/leaflet-tilelayer-colorizr.js"></script>
    <script src="/assets/lib/xm-select.js"></script>
    <style>
        .layadmin-shortcut li .layui-icon {
            color: #FFFFFF;
            background-color: #1E9FFF;
        }

        .layadmin-shortcut li:hover .layui-icon {
            background-color: #93D1FF;
        }

        .card-body-scrollbar {
            width: 100%;
            height: 100%;
            overflow: hidden; /*  新加的 */
            background-color: transparent !important;
        }

        .card-body-scrollbar:hover {
            overflow: auto; /*  新加的 */
        }

        .card-body-scrollbar.flex-layout {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-content: center;
        }

        .right-one-row {
            height: 100%;
            width: 100%;
            justify-content: left;
            display: flex;
            align-items: stretch;
            flex-wrap: wrap;
        }

        .right-one-row .right-one-item {
            /*height: 50%;*/
            width: 25%;
            justify-content: center;
            display: flex;
            align-items: center;
        }

        .right-one-item .message {
            height: 100%;
            width: 100%;
            flex-direction: column;
            justify-content: center;
            display: flex;
            align-items: center;
        }

        .title {
            height: 50%;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00F7DE;
        }

        .data {
            height: 50%;
            width: 100%;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            color: #bd1a1a;
        }

        .divce-offsetxyz {
            height: 13px;
        }

        .g_bar {
            display: inline-block;
            position: relative;
            height: 10px;
            border: 1 px solid  #ccc;
            border-left: 0;
        }

        .g_bar.xcor {
            background: #ea4f4f
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .devicemarker {
            display: flex;
            display: -webkit-flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #bd1a1a;
        }

        .devicemarker span {
            display: inline-block;
            height: 32px;
            width: 100%;
            background: url('/assets/images/CORS_Active32.png') no-repeat center center;
            margin-top: 3px;
            margin-bottom: -20px;

        }

        body {
            min-width: 1000px;
        }

        .little {
            text-align: center;
            width: 200px;
            /*margin-left: 10%;*/
            line-height: 40px;
            margin: auto;
            transition: bottom .2s linear 0s;
            bottom: 0px;
        }
        .icon {
            display: inline-block;
            width: 32px; height: 32px;
            overflow: hidden;
        }
        .icon > .icon{
            position: relative;
            left: -32px;
            border-right: 32px solid transparent;
            -webkit-filter: drop-shadow(32px 0);
            filter: drop-shadow(32px 0);
        }
        .iconchange{
            position: relative;
            left: -32px;
            border-right: 32px solid transparent;
            -webkit-filter: drop-shadow(32px 0);
            filter: drop-shadow(32px 0);
        }
    </style>
</head>
<style>

</style>
<body>
<div class="layui-fluid">

    <div style="text-align: center;display: flex;justify-content: center;align-items: center;">
        <div style="width:100%">
            <div class="layui-card" style="display: flex">
                <div style="margin-top: 16px;margin-left: 10px;">
                    <div id="templatename" style="font-weight: bold;font-size: 24px;"></div>
                    <div style="font-size: 24px;font-weight: bold;">模板设置</div>
                </div>
                <ul style="display: flex ;margin: auto;height: 100px" id="menu">
                </ul>
                <div style="margin-top: 31px;margin-right: 10%;">
                    <div id="return" style="font-weight: bold;font-size: 24px;">
                        <a lay-href="javascript:history.go(-1)"  lay-tips="返回上一页" lay-direction="2"><i class="layui-icon layui-icon-return" style="font-size: 30px; color: #1E9FFF;"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="width: 100%;" id="content">
        <iframe id="iframe_a" src="" frameborder="0" name="iframe_a" onload="this.height=iframe_a.document.body.scrollHeight"
                width="100%" scrolling="no" frameborder="0" style="height: 2000px"></iframe>
    </div>
</div>
</div>

<script src="/assets/lib/jquery-3.4.1.min.js"></script>
<script src="/assets/lib/jquery.i18n.properties-min.js"></script>
<script src="/assets/lib/loadlanguage.js"></script>
<script src="/assets/layuiadmin/layui/layui.js"></script>
<script>
    var templatename = "#(templatename)"
    var authority1="#(webauthority)";
    var type="#(type)";
    var modeltype="#(modeltype)";

    layui.config({
        base: '/assets/layuiadmin/'
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index']);

    debugger
    showtype(type);
    function  iframechange() {
        var iframes = document.getElementsByTagName('iframe_a');
        for (let i = 0, j = iframes.length; i < j; ++i) {
            // 放在闭包中，防止iframe触发load事件的时候下标不匹配
            (function(_i) {
                iframes[_i].onload = function() {
                    // 提前还原高度
                    this.setAttribute('height', 'auto'); // 或设为''
                    // 再在下一轮事件循环中设置新高度
                    setTimeout(function() {
                        iframes[_i].setAttribute('height', iframes[_i].contentWindow.document.body.scrollHeight);
                    }, 0);
                }
            })(i);
        }
        for (let i= 0, j = iframes.length; i < j; ++i) {
            // 放在闭包中，防止iframe触发load事件的时候下标不匹配
            (function(_i) {
                iframes[_i].onload = function() {
                    this.contentWindow.onbeforeunload = function() {
                        iframes[_i].setAttribute('height', 'auto');
                    };

                    this.setAttribute('height', this.contentWindow.document.body.scrollHeight);
                };
            })(i);
        }
    }

    function showtype(type){
        if(templatename!=""){
            $("#templatename").html(templatename);
        }
        if(type=="1"){
            document.getElementById("menu").innerHTML="    <li class=\"little\" id=\"fastsetting\"  >\n" +
                "                        <div style=\"display: flex;justify-content: center;\" ><i  class=\"icon\" ><i id=\"fastsetting2\"  class=\"icon\" style=\"background: url(/assets/images/icon-zhinan.png) no-repeat center;\"></i></i></div>\n" +
                "                        <div>快速设置</div>\n" +
                "                    </li>\n"
            if(modeltype=="1"){
                document.getElementById("iframe_a").src="/template/fastsetting?templatename="+templatename+"&&type=1";
            }else{
                document.getElementById("iframe_a").src="/template/fastsetting?type=0";
            }
        }else{
            document.getElementById("menu").innerHTML="    <li class=\"little\" id=\"devicesetting\">\n" +
                "                        <div style=\"display: flex;justify-content: center;\"><i class=\"icon\"><i class=\"icon\" style=\"background: url(/assets/images/testsetting_black.png) no-repeat center;\"></i></i></div>\n" +
                "                        <div>测站设置</div>\n" +
                "                    </li>";
            if(modeltype=="1"){
                document.getElementById("iframe_a").src="/template/stationsetting?templatename="+templatename+"&&type=1";
            }else{
                document.getElementById("iframe_a").src="/template/stationsetting?type=0";
            }
        }
    }
</script>
</body>
</html>