<!DOCTYPE html>
<html>
<head>
    #@meta("群组管理")
    <style TYPE="text/css">
        .layui-form .layui-form-label {
            width: 180px !important;
        }
        .layui-form .layui-input-block {
            margin-left: 180px !important;
        }
        .layui-form .layui-form-item .layui-input-inline {
            margin-left: 0px !important;
        }
        .layui-form-pane .layui-form-label {
            width: 180px !important;
        }
        .layui-form-pane .layui-input-block {
            margin-left: 180px !important;
        }
        .layui-form-pane .layui-form-item[pane] .layui-input-inline {
            margin-left: 180px !important;
        }
    </style>
</head>
<body>

<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-header" data-locale="web_item_add">账户管理 / #(isAdd ? "创建" : "修改")</div>
        <div class="layui-card-body" style="padding: 15px;">
            <form class="layui-form layui-form-pane" lay-filter="myForm">
                #if(isEdit)
                <input type="hidden" name="account.id" value="#(account.id)" />
                <input type="hidden" name="ntripgroup.id" value="#(group.id)" />
                #end
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_group_name">Service name</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.groupname" lay-verify="required"  class="layui-input" value="#(group.groupname)">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_expiration">Due date</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.duetime" id="date" lay-verify="date" value="#(group.duetime)" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_caster_port">Casterport</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.casterport" value="#(group.casterport)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_listen_port">Listen port</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.listenport" value="#(group.listenport)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_data_port">Data port</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.dataport" value="#(group.dataport)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_basecount">Base number</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.basenumber" value="#(group.basenumber)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_rovercount">Rover number</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.rovernumber" value="#(group.rovernumber)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_datakeep_days">Data retention days</label>
                    <div class="layui-input-block">
                        <input type="text" name="ntripgroup.datakeepdays" value="#(group.datakeepdays)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item" pane="">
                    <label class="layui-form-label" data-locale="web_item_nearest_station">Nearest station</label>
                    <div class="layui-input-block">
                        <input type="checkbox" lay-skin="switch" lay-text="ON|OFF" lay-filter="rover-switch"
                               name="nearest_station" id="nearest_station">
                    </div>
                </div>
                <div class="layui-form-item" pane="">
                    <label class="layui-form-label" data-locale="web_item_par_broadcast">Parameter broadcasting</label>
                    <div class="layui-input-block">
                        <input type="checkbox" lay-skin="switch" lay-text="ON|OFF" lay-filter="rover-switch"
                               name="parameter_broadcast" id="parameter_broadcast">
                    </div>
                </div>
                <div class="layui-form-item" pane="">
                    <label class="layui-form-label">Cube.core</label>
                    <div class="layui-input-block">
                        <input type="checkbox" lay-skin="switch" lay-text="ON|OFF" lay-filter="rover-switch"
                               name="enable_vrs" id="enable_vrs">
                    </div>
                </div>
                #if (isEdit)
                #else
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_username">Username</label>
                    <div class="layui-input-inline">
                        <input type="text" name="account.userName" value="#(account.userName)" lay-verify="userName" lay-verType="tips" autocomplete="off" id="userName" class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux" data-locale="web_item_login_username">Login user name</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_password">Password</label>
                    <div class="layui-input-inline">
                        <input type="text" name="account.password" value="#(account.password)" lay-verify="pass" lay-verType="tips" autocomplete="off" id="password" class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux" data-locale="web_psw_chars">6到16个字符</div>
                </div>
                #end

                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_name">Name</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.name" value="#(account.name)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_surname">Surname</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.surname" value="#(account.surname)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_company">Company</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.company" value="#(account.company)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_email">Email</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.email" lay-verify="email" value="#(account.email)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_phone">Phone</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.phone" value="#(account.phone)" autocomplete="on"  class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" data-locale="web_item_address">Address</label>
                    <div class="layui-input-block">
                        <input type="text" name="account.address" value="#(account.address)" autocomplete="on"  class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item layui-layout-admin">
                    <div class="layui-input-block">
                        <div class="layui-footer" style="left: 0;">
                            <button class="layui-btn" lay-submit="" lay-filter="submitBtn" data-locale="web_item_sumbit">立即提交</button>
                            <button class="layui-btn layui-btn-primary" id="returnBtn" lay-filter="returnBtn" data-locale="web_item_return">返回</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="/assets/lib/jquery-3.4.1.min.js"></script>
<script src="/assets/lib/jquery.i18n.properties-min.js"></script>
<script src="/assets/lib/loadlanguage.js"></script>
<script src="/assets/layuiadmin/layui/layui.js"></script>
<script>
    //console.log("#(isAdd)");
    var type  = "#(type)";
    var isEdit = "#(isEdit)";
    layui.config({
        base: '/assets/layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index','laydate','form'], function(){
        var $ = layui.$
            ,admin = layui.admin
            ,layer = layui.layer
            ,laydate = layui.laydate
            ,form = layui.form;

        //日期
        laydate.render({
            elem: '#date'
            ,lang: $.i18n.prop('web_date_lang')
        });

        /* 监听提交 */
        form.on('submit(submitBtn)', function(obj){
            var urlpath;
            if (isEdit=="true"){
                urlpath = '/account/updategroup';
            }else {
                urlpath = '/account/savenewgroup';
            }
            admin.req({
                url:urlpath,
                data:obj.field,
                done:function (res) {
                    layer.msg($.i18n.prop('web_item_completed'), {
                        offset: '15px'
                        ,icon: 1
                        ,time: 1000
                    }, function(){
                        if (type==1)
                        {
                            location.href = "/account";
                        }
                        else
                        {
                            location.href = "/dashboard";
                        }
                    });
                }
            })
            return false;
        });
        $('#returnBtn').on('click', function () {
            if (type==1)
            {
                location.href = "/account";
            }
            else
            {
                location.href = "/dashboard";
            }
            return false;
        })
    });
</script>
</body>
</html>
